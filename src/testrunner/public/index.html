<html>
<body>

<div id="messages"></div>

<select id="idListeTests"></select>

<button id="boutonLancer"> Lancer</button>

<div id="svgContainer"></div>

<script src="socket.io.min.js"></script>
<script src="utils.js"></script>
<script src="graph.js"></script>


<script>

window.onload = function()
{
    get('/api/tests', function(req) {
        JSON.parse(req.response).forEach(o =>
        {
            addOption('idListeTests', o, o);
        });
    });

    boutonLancer.onclick = function()
    {
        graphClearMessages();
        post('/api/lancer', {nom:selectedOptionValue('idListeTests')}, null);
    }

    get('/schema.svg', function(req) { 
        var mySVG = req.responseXML.getElementsByTagName("svg")[0];
        document.getElementById('svgContainer').appendChild(mySVG);
    });

    var socket = io();
    socket.on('message', function(msg){
        //var li = document.createElement('li');
        //li.innerText = msg;
        //document.getElementById('messages').appendChild(li);
        graphPushMessage(msg);
    });
};


</script>

</body>
</html>